<div class="value-management">
    <div class="section-header">
        <h1>My Values</h1>
        <p>Your FREE plan lets you define up to 10 organizational values and descriptors for document alignment.</p>
    </div>
    <button class="btn-cust btn-cust-primary mb-4" (click)="onAdd(content)">
        + Add New Value
    </button>

    <div class="values-grid" id="valuesGrid">
        @for (value of values(); track $index) {
        <div class="value-card">
            <div class="value-header">
                <div class="value-title">{{value.name}}</div>
                <div class="value-actions">
                    <button class="icon-btn" (click)="onEdit(content, value)">‚úèÔ∏è</button>
                    <button class="icon-btn" (click)="onDelete(deleteContent, value)">üóëÔ∏è</button>
                </div>
            </div>
            <p class="text-muted mb-3">{{value.description}}</p>
            <div class="tolerance-container">
                <div class="tolerance-header">
                    <span class="tolerance-label">Compliance Tolerance</span>
                    <span class="tolerance-value">{{value.complianceTolerance}}/10</span>
                </div>
                <input type="range" class="slider" [value]="value.complianceTolerance" min="1" max="10" disabled>
            </div>
        </div>
        }
    </div>

    <div class="card mt-4 text-center p-3">
        <span class="text-muted">You have used {{values().length}} of 10 available value slots</span>
    </div>

    <!-- Locked PRO Features -->
    <div class="mt-5">
        <div class="card position-relative pro-feature-card mb-3">
            <div class="pro-feature-overlay">
                <div class="text-center">
                    <span class="pro-feature-icon">üîí</span>
                    <p class="pro-feature-title">Upload Core Documents</p>
                    <button class="btn btn-primary" (click)="onUpGradePlan(upGradeContent, values)">Upgrade to
                        PRO</button>
                </div>
            </div>
            <h3 class="card-title">Upload Core Documents (PRO Feature)</h3>
            <p class="text-light">Upload PDFs, Word docs, or enter text for your mission statements,
                brand guidelines, and other core documents</p>
        </div>

        <div class="card position-relative pro-feature-card">
            <div class="pro-feature-overlay">
                <div class="text-center">
                    <span class="pro-feature-icon">üîí</span>
                    <p class="pro-feature-title">Copy and Paste Core Reference URL</p>
                    <button class="btn btn-primary" (click)="onUpGradePlan(upGradeContent, values)">Upgrade to
                        PRO</button>
                </div>
            </div>
            <h3 class="card-title">Copy and Paste Core Reference URL (PRO Feature)</h3>
            <p class="text-light">Add external compliance documents, industry standards, and regulatory
                requirements</p>
        </div>
    </div>
</div>

<!-- Add Edit/Model -->
<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title">{{isEditing() ? 'Edit' : 'Add'}} Value</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div id="quickValuesSection" *ngIf="!isEditing()">
            <h4 class="mb-3">Quick Start Templates</h4>
            <div class="quick-values-grid">
                <div class="quick-value-card" (click)="useQuickValue('innovation')">
                    <div class="quick-value-title">üí° Innovation & Creativity</div>
                    <div class="quick-value-desc">Foster creative thinking and breakthrough solutions</div>
                </div>
                <div class="quick-value-card" (click)="useQuickValue('customer')">
                    <div class="quick-value-title">üë• Customer First</div>
                    <div class="quick-value-desc">Prioritize customer needs and satisfaction</div>
                </div>
                <div class="quick-value-card" (click)="useQuickValue('sustainability')">
                    <div class="quick-value-title">üå± Sustainability</div>
                    <div class="quick-value-desc">Environmental responsibility and sustainable practices</div>
                </div>
                <div class="quick-value-card" (click)="useQuickValue('diversity')">
                    <div class="quick-value-title">ü§ù Diversity & Inclusion</div>
                    <div class="quick-value-desc">Embrace diverse perspectives and inclusive culture</div>
                </div>
            </div>
            <div class="text-center">
                <span class="text-muted">‚Äî OR ‚Äî</span>
            </div>
        </div>
        <form [formGroup]="myValueForm">
            <div class="form-group mb-3">
                <label>Value Name</label>
                <input type="text" formControlName="name" class="form-control mt-1"
                    placeholder="e.g., Innovation & Excellence">
                <app-validation-errors [control]="myValueForm.get('name')"></app-validation-errors>
            </div>
            <div class="form-group mb-3">
                <label>Value Description</label>
                <textarea formControlName="description" class="form-control mt-1"
                    placeholder="Describe this value in 35-100 words..." (input)="updateWordCount()">
                </textarea>
                <app-validation-errors [control]="myValueForm.get('description')"></app-validation-errors>
                <div class="word-counter mt-1" [class.text-danger]="wordCount() < 35 || wordCount() > 100"
                    [class.text-success]="wordCount() >= 35 && wordCount() <= 100">
                    {{ wordCount() }} / 35-100 words
                </div>
            </div>
            <div class="form-group">
                <label>Compliance Tolerance</label>
                <div class="tolerance-container">
                    <div class="tolerance-header">
                        <span class="tolerance-label">How strictly should documents align?</span>
                        <span class="tolerance-value">{{ myValueForm.get('complianceTolerance')?.value }}/10</span>
                    </div>
                    <input type="range" class="slider" formControlName="complianceTolerance" min="1" max="10"
                        (input)="updateToleranceDisplay()">
                    <div class="tolerance-labels">
                        <span>Flexible</span>
                        <span>Moderate</span>
                        <span>Strict</span>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn-cust btn-cust-close" (click)="modal.close('Close click')">Cancel</button>
        <button type="button" class="btn-cust btn-cust-primary" (click)="onSave()">
            Save
        </button>
    </div>
</ng-template>

<!-- UpGrade/Model -->
<ng-template #upGradeContent let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Upgrade to PRO</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div class="text-center mb-4">
            <h2 class="text-primary mb-2">$49 AUD/month</h2>
            <p class="text-muted">or $504/year (save $84)</p>
        </div>

        <span class="mb-3">PRO Features Include:</span>
        <ul class="list-unstyled">
            <li class="py-2 text-success">‚úì Upload up to 10 Core Documents</li>
            <li class="py-2 text-success">‚úì Add up to 5 Reference URLs</li>
            <li class="py-2 text-success">‚úì Access to GPT-4 Turbo (GPT-4.5)</li>
            <li class="py-2 text-success">‚úì 4x more tokens for most models</li>
            <li class="py-2 text-success">‚úì Advanced alignment analysis</li>
            <li class="py-2 text-success">‚úì Priority support</li>
        </ul>

        <div class="mt-4">
            <span class="mb-3">Token Limits Comparison</span>
            <table class="table comparison-table">
                <thead>
                    <tr>
                        <th>Model</th>
                        <th class="free-column">FREE Plan</th>
                        <th class="pro-column">PRO Plan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="model-name">GPT-4.5 Turbo</td>
                        <td class="free-column not-available">‚ùå Not Available</td>
                        <td class="pro-column">
                            <div class="highlight">‚úì Available</div>
                            <div class="small">
                                Input: 133,333 tokens (~178 pages)<br>
                                Output: 66,666 tokens (~89 pages)
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="model-name">GPT-4o</td>
                        <td class="free-column">
                            <div class="small">
                                Input: 1M tokens (~1,333 pages)<br>
                                Output: 250K tokens (~333 pages)
                            </div>
                        </td>
                        <td class="pro-column">
                            <div class="highlight">4x More!</div>
                            <div class="small">
                                Input: 4M tokens (~5,333 pages)<br>
                                Output: 1M tokens (~1,333 pages)
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="mt-4 p-3 bg-light rounded">
            <p class="small text-muted text-center mb-0">
                <strong>Note:</strong> Page approximations are based on ~750 tokens per A4 page
            </p>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn-cust btn-cust-close" (click)="modal.close('Close click')">Maybe later</button>
        <button class="btn-cust btn-cust-primary" (click)="upGradePlan()">Upgrade Now</button>
    </div>
</ng-template>

<!-- Delete/Model -->
<ng-template #deleteContent let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Are you sure?</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <p>Do you really want to delete Value?</p>
    </div>
    <div class="modal-footer">
        <button class="btn-cust btn-cust-danger" (click)="deleteMyValue()">Delete</button>
        <button type="button" class="btn-cust btn-cust-close" (click)="modal.close('Close click')">Cancel</button>
    </div>
</ng-template>