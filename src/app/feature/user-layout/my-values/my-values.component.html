<div class="value-management">
    <div class="section-header">
        <h1>My Values</h1>
        <p>Your FREE plan lets you define up to 10 organizational values and descriptors for document alignment.</p>
    </div>
    <button class="btn-cust btn-cust-primary mb-4" (click)="onAdd(content)">
        + Add New Value
    </button>

    <div class="values-grid" id="valuesGrid">
        @for (value of value; track $index) {
        <div class="value-card">
            <div class="value-header">
                <div class="value-title">{{value.name}}</div>
                <div class="value-actions">
                    <button class="icon-btn" (click)="onEdit(content, value)">‚úèÔ∏è</button>
                    <button class="icon-btn" (click)="onDelete(content, value)">üóëÔ∏è</button>
                </div>
            </div>
            <p class="text-muted mb-3">{{value.description}}</p>
            <div class="tolerance-container">
                <div class="tolerance-header">
                    <span class="tolerance-label">Compliance Tolerance</span>
                    <span class="tolerance-value">{{value.tolerance}}/10</span>
                </div>
                <input type="range" class="slider" min="1" max="10" [value]="value.tolerance" disabled>
            </div>
        </div>
        }
    </div>

    <div class="card mt-4 text-center p-3">
        <span class="text-muted">You have used {{value.length}} of 10 available value slots</span>
    </div>

    <!-- Locked PRO Features -->
    <div class="mt-5">
        <div class="card position-relative pro-feature-card mb-3">
            <div class="pro-feature-overlay">
                <div class="text-center">
                    <span class="pro-feature-icon">üîí</span>
                    <p class="pro-feature-title">Upload Core Documents</p>
                    <button class="btn btn-primary" (click)="showUpgradeModal()">Upgrade to PRO</button>
                </div>
            </div>
            <h3 class="card-title">Upload Core Documents (PRO Feature)</h3>
            <p class="text-light">Upload PDFs, Word docs, or enter text for your mission statements,
                brand guidelines, and other core documents</p>
        </div>

        <div class="card position-relative pro-feature-card">
            <div class="pro-feature-overlay">
                <div class="text-center">
                    <span class="pro-feature-icon">üîí</span>
                    <p class="pro-feature-title">Copy and Paste Core Reference URL</p>
                    <button class="btn btn-primary" (click)="showUpgradeModal()">Upgrade to PRO</button>
                </div>
            </div>
            <h3 class="card-title">Copy and Paste Core Reference URL (PRO Feature)</h3>
            <p class="text-light">Add external compliance documents, industry standards, and regulatory
                requirements</p>
        </div>
    </div>
</div>

<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title">{{isEditing() ? 'Edit' : 'Add'}} Value</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div id="quickValuesSection" *ngIf="!isEditing()">
            <h4 class="mb-3">Quick Start Templates</h4>
            <div class="quick-values-grid">
                <div class="quick-value-card" (click)="useQuickValue('innovation')">
                    <div class="quick-value-title">üí° Innovation & Creativity</div>
                    <div class="quick-value-desc">Foster creative thinking and breakthrough solutions</div>
                </div>
                <div class="quick-value-card" (click)="useQuickValue('customer')">
                    <div class="quick-value-title">üë• Customer First</div>
                    <div class="quick-value-desc">Prioritize customer needs and satisfaction</div>
                </div>
                <div class="quick-value-card" (click)="useQuickValue('sustainability')">
                    <div class="quick-value-title">üå± Sustainability</div>
                    <div class="quick-value-desc">Environmental responsibility and sustainable practices</div>
                </div>
                <div class="quick-value-card" (click)="useQuickValue('diversity')">
                    <div class="quick-value-title">ü§ù Diversity & Inclusion</div>
                    <div class="quick-value-desc">Embrace diverse perspectives and inclusive culture</div>
                </div>
            </div>
            <div class="text-center">
                <span class="text-muted">‚Äî OR ‚Äî</span>
            </div>
        </div>
        <form [formGroup]="myValueForm">
            <div class="form-group mb-3">
                <label>Value Name</label>
                <input type="text" formControlName="name" class="form-control mt-1"
                    placeholder="e.g., Innovation & Excellence">
            </div>
            <div class="form-group mb-3">
                <label>Value Description</label>
                <textarea formControlName="description" class="form-control mt-1"
                    placeholder="Describe this value in 35-100 words..." (input)="updateWordCount()"></textarea>

                <div *ngIf="myValueForm.get('description')?.errors" class="text-danger small mt-1">
                    <div *ngIf="myValueForm.get('description')?.errors?.['minWords']">
                        Minimum 35 words required (currently
                        {{myValueForm.get('description')?.errors?.['minWords'].actual}})
                    </div>
                    <div *ngIf="myValueForm.get('description')?.errors?.['maxWords']">
                        Maximum 100 words allowed (currently
                        {{myValueForm.get('description')?.errors?.['maxWords'].actual}})
                    </div>
                </div>
                <div class="word-counter mt-1" [class.text-danger]="wordCount() < 35 || wordCount() > 100"
                    [class.text-success]="wordCount() >= 35 && wordCount() <= 100">
                    {{ wordCount() }} / 35-100 words
                </div>
            </div>

            <div class="form-group">
                <label>Compliance Tolerance</label>
                <div class="tolerance-container">
                    <div class="tolerance-header">
                        <span class="tolerance-label">How strictly should documents align?</span>
                        <span class="tolerance-value">{{ myValueForm.get('tolerance')?.value }}/10</span>
                    </div>
                    <input type="range" class="slider" formControlName="tolerance" min="1" max="10"
                        (input)="updateToleranceDisplay()">
                    <div class="tolerance-labels">
                        <span>Flexible</span>
                        <span>Moderate</span>
                        <span>Strict</span>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn-cust btn-cust-close" (click)="modal.close('Close click')">Cancel</button>
        <button type="button" class="btn-cust btn-cust-primary" (click)="onSave()"
            [disabled]="!myValueForm.valid || !wordCountValid">
            Save
        </button>
    </div>
</ng-template>

<!-- Delete/Model -->
<ng-template #deleteContent let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Are you sure?</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <p>Do you really want to delete Value?</p>
    </div>
    <div class="modal-footer">
        <button class="btn-cust btn-cust-danger" (click)="deleteMyValue()">Delete</button>
        <button type="button" class="btn-cust btn-cust-close" (click)="modal.close('Close click')">Cancel</button>
    </div>
</ng-template>